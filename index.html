

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OneSignal Emails</title>
    <script src="https://cdn.onesignal.com/sdks/web/v16/OneSignalSDK.page.js" defer></script>
    <script>
      window.OneSignalDeferred = window.OneSignalDeferred || [];
      OneSignalDeferred.push(async function(OneSignal) {
          await OneSignal.init({
              appId: "316c49b3-9f2d-4baf-bac4-e1a654a8365b",
              safari_web_id: "web.onesignal.auto.1150f274-be67-4412-813c-e6f1ba6adf3e",
              notifyButton: {
                  enable: true,
              },
          });
      });

      function setEmail() {
          const email = prompt("Please enter your email", "example@domain.com");
          if(email !== null) {
              OneSignal.push(function() {
                  OneSignal.setEmail(email).then(function(emailId) {
                      // Callback called when email have finished sending
                      console.log("emailId: ", emailId);
                      /*Creating a user_name identifier tag to be used in the email
                        Example: OneSignal.sendTag("user_name", "devpato");
                      */
                      OneSignal.sendTag("user_name", "a_user_name");
                  });
              });

          }
      }


    </script>
  </head>
  <body>
    <button onclick="setEmail()">Set Email</button>
  </body>
</html>
